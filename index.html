<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üèõÔ∏è –ò–µ—Ä–∞—Ä—Ö–∏—è Prizm Imperium</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <script src="data.js" defer></script>
    <script src="visualization.js" defer></script>
</head>
<body>
    <div class="container">
        <!-- –®–∞–ø–∫–∞ -->
        <header class="header">
            <div class="header-content">
                <h1 class="title">üèõÔ∏è Prizm Imperium</h1>
                <p class="subtitle">–ò–µ—Ä–∞—Ä—Ö–∏—è –∏–º–ø–µ—Ä–∏–∏ | –û–±–Ω–æ–≤–ª–µ–Ω–æ: <span id="update-date">–ó–∞–≥—Ä—É–∑–∫–∞...</span></p>
                <div class="stats-bar">
                    <div class="stat">
                        <span class="stat-value" id="total-rulers">0</span>
                        <span class="stat-label">–ü—Ä–∞–≤–∏—Ç–µ–ª–µ–π</span>
                    </div>
                    <div class="stat">
                        <span class="stat-value" id="active-rulers">0</span>
                        <span class="stat-label">–ê–∫—Ç–∏–≤–Ω—ã—Ö</span>
                    </div>
                    <div class="stat">
                        <span class="stat-value" id="total-connections">0</span>
                        <span class="stat-label">–°–≤—è–∑–µ–π</span>
                    </div>
                    <div class="stat">
                        <span class="stat-value" id="update-time">0</span>
                        <span class="stat-label">—Å–µ–∫ –Ω–∞–∑–∞–¥</span>
                    </div>
                </div>
            </div>
        </header>

        <!-- –ü–æ–∏—Å–∫ -->
        <div class="search-section">
            <div class="search-container">
                <input type="text" 
                       id="search-input" 
                       placeholder="–ü–æ–∏—Å–∫ –ø–æ ID –∏–ª–∏ –∏–º–µ–Ω–∏..."
                       autocomplete="off">
                <button id="search-btn" class="btn">üîç –ü–æ–∏—Å–∫</button>
                <button id="clear-search" class="btn btn-secondary">‚ùå –û—á–∏—Å—Ç–∏—Ç—å</button>
                <button id="highlight-connections" class="btn">üîó –°–≤—è–∑–∏</button>
                <button id="reset-view" class="btn">‚ü≤ –°–±—Ä–æ—Å</button>
            </div>
            <div class="search-results" id="search-results"></div>
        </div>

        <!-- –ì—Ä–∞—Ñ–∏–∫ -->
        <div class="visualization-section">
            <svg id="graph" width="100%" height="700"></svg>
            <div class="loading" id="loading">
                <div class="spinner"></div>
                <p>–ó–∞–≥—Ä—É–∑–∫–∞ –∏–µ—Ä–∞—Ä—Ö–∏–∏...</p>
            </div>
        </div>

        <!-- –õ–µ–≥–µ–Ω–¥–∞ -->
        <div class="legend-section">
            <div class="legend">
                <h3>üìã –õ–µ–≥–µ–Ω–¥–∞</h3>
                <div class="legend-items" id="legend-items">
                    <div class="legend-item">
                        <div class="legend-color" style="background: #FFD700; border-color: #FFD700"></div>
                        <div class="legend-text">–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä</div>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color" style="background: #4CAF50; border-color: #4CAF50"></div>
                        <div class="legend-text">–ê–∫—Ç–∏–≤–Ω—ã–π</div>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color" style="background: #FF9800; border-color: #FF9800"></div>
                        <div class="legend-text">–û–∂–∏–¥–∞–µ—Ç</div>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color" style="background: #9E9E9E; border-color: #9E9E9E"></div>
                        <div class="legend-text">–ù–µ–∞–∫—Ç–∏–≤–Ω—ã–π</div>
                    </div>
                </div>
            </div>
            
            <div class="controls">
                <h3>üéÆ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ</h3>
                <ul class="controls-list">
                    <li>‚Ä¢ <strong>–ü–æ–∏—Å–∫</strong> - –≤–≤–µ–¥–∏—Ç–µ ID –∏–ª–∏ –∏–º—è</li>
                    <li>‚Ä¢ <strong>–ö–ª–∏–∫</strong> –Ω–∞ —É–∑–µ–ª - –ø–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏</li>
                    <li>‚Ä¢ <strong>–ü–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏–µ</strong> - –ø–µ—Ä–µ–º–µ—â–µ–Ω–∏–µ —É–∑–ª–æ–≤</li>
                    <li>‚Ä¢ <strong>–ö–æ–ª–µ—Å–∏–∫–æ</strong> - –º–∞—Å—à—Ç–∞–±</li>
                    <li>‚Ä¢ <strong>–î–≤–æ–π–Ω–æ–π –∫–ª–∏–∫</strong> - —Å–±—Ä–æ—Å –º–∞—Å—à—Ç–∞–±–∞</li>
                    <li>‚Ä¢ <strong>"–°–≤—è–∑–∏"</strong> - –ø–æ–∫–∞–∑–∞—Ç—å —Å–≤—è–∑–∏ –≤—ã–¥–µ–ª–µ–Ω–Ω–æ–≥–æ —É–∑–ª–∞</li>
                </ul>
            </div>

            <div class="info-panel" id="node-info">
                <h3>üë§ –í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–∞–≤–∏—Ç–µ–ª—è</h3>
                <p>–ö–ª–∏–∫–Ω–∏—Ç–µ –Ω–∞ –ª—é–±–æ–π —É–∑–µ–ª –∏–ª–∏ –Ω–∞–π–¥–∏—Ç–µ —á–µ—Ä–µ–∑ –ø–æ–∏—Å–∫</p>
            </div>
        </div>

        <!-- –ü–æ–¥—Å–∫–∞–∑–∫–∞ -->
        <div class="tooltip" id="tooltip"></div>

        <!-- –ü–æ–¥–≤–∞–ª -->
        <footer class="footer">
            <p>Prizm Imperium Hierarchy Visualizer | –û–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏</p>
            <p class="footer-note">–î–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–≥–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –±—Ä–∞—É–∑–µ—Ä</p>
        </footer>
    </div>

    <script>
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –ø–æ–ª–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
        document.addEventListener('DOMContentLoaded', function() {
            console.log('DOM –∑–∞–≥—Ä—É–∂–µ–Ω, –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—é...');
            
            // –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ –¥–∞–Ω–Ω—ã—Ö
            if (typeof getVisualizationData !== 'undefined') {
                const data = getVisualizationData();
                console.log('–î–∞–Ω–Ω—ã–µ –∑–∞–≥—Ä—É–∂–µ–Ω—ã:', data);
                console.log('–£–∑–ª–æ–≤:', data.nodes.length);
                console.log('–°–≤—è–∑–µ–π:', data.links.length);
                
                // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—é
                window.visualizer = new ImperialVisualizer();
            } else {
                console.error('–§—É–Ω–∫—Ü–∏—è getVisualizationData –Ω–µ –Ω–∞–π–¥–µ–Ω–∞!');
                document.getElementById('loading').innerHTML = 
                    '<div style="color: #f44336; text-align: center;">‚ùå –û—à–∏–±–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–∞–π–ª data.js</div>';
            }
        });
    </script>
</body>
</html>
